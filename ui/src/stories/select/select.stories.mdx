import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs';
import {
  OuiSelectModule,
  OuiFormFieldModule,
  OuiInputModule,
  OuiSelect,
} from '../../components';
import { action } from '@storybook/addon-actions';
import { FormsModule, ReactiveFormsModule } from '@angular/forms';
import { APPEARANCE, THEME } from '../const';

<Meta title="FORM FIELD/Select" />

# Select

`<oui-select>` is a form control for selecting a value from a set of options, similar to the native `<select>` element. It is designed to work inside of a `<oui-form-field>` element.

To add options to the select, add elements to the `<oui-select>`. Each `<oui-option>` has a value property that can be used to set the value that will be selected if the user chooses this option. The content of the `<oui-option>` is what will be shown to the user. See: https://github.com/scheduleonce/once-ui/blob/master/ui/src/components/select/README.md

Regular Select

<Canvas>
  <Story
    name="Regular"
    height="350px"
    parameters={{
      docs: {
        source: {
          code: `<oui-form-field>
  <oui-select large placeholder="Favorite food">
    <oui-option *ngFor="let food of foods" [value]="food">
      {{food array}}
    </oui-option>
  </oui-select>
</oui-form-field>`,
        },
      },
    }}
    args={{
      large: false,
      theme: THEME[0],
      disabled: false,
      appearance: APPEARANCE[0],
      placeholder: 'Favorite food',
      options: [
        'Pizza',
        'Burgers',
        'Steak',
        'Tacos',
        'Pasta',
        'Fries',
        'Momos',
        'Kababs',
        'Rolls',
        'Biryani',
        'Sweets',
      ],
      singleActionLabel: 'apply',
    }}
    argTypes={{
      theme: {
        options: THEME,
        control: { type: 'select' },
      },
      appearance: {
        options: ['standard', 'underline'],
        control: { type: 'select' },
      },
      options: {
        control: { type: 'object' },
      },
    }}
  >
    {(props) => ({
      moduleMetadata: {
        imports: [
          OuiFormFieldModule,
          OuiInputModule,
          OuiSelectModule,
          FormsModule,
          ReactiveFormsModule,
        ],
      },
      template: `
    <div style="width: 213px;">
      <oui-form-field [appearance]="appearance">
        <oui-select (selectionChange)="onChange($event)" ngClass="{{theme}}" [large]="large" [placeholder]="placeholder" [singleActionLabel]="singleActionLabel" singleActionItem [disabled]="disabled">
          <oui-option *ngFor="let option of options" [value]="option">
            {{option}}
          </oui-option>
        </oui-select>
      </oui-form-field>
    </div>
    `,
      props: {
        ...props,
        onChange: action('change'),
      },
    })}
  </Story>
</Canvas>

Multi select with actionItems:

<Canvas>
  <Story
    name="Multi select"
    height="300px"
    parameters={{
      docs: {
        source: {
          code: `<oui-form-field>
  <oui-select large placeholder="Favorite food" multiple actionItems>
    <oui-option *ngFor="let food of foods" [value]="food">
      {{food array}}
    </oui-option>
  </oui-select>
</oui-form-field>`,
        },
      },
    }}
    args={{
      large: false,
      theme: THEME[0],
      disabled: false,
      appearance: APPEARANCE[0],
      placeholder: 'Favorite food',
      options: [
        'Pizza',
        'Burgers',
        'Steak',
        'Tacos',
        'Pasta',
        'Fries',
        'Momos',
        'Kababs',
        'Rolls',
        'Biryani',
        'Sweets',
      ],
      cancelLabel: 'Discard',
      doneLabel: 'Apply',
      allowNoSelection: false,
    }}
    argTypes={{
      theme: {
        options: THEME,
        control: { type: 'select' },
      },
      appearance: {
        options: ['standard', 'underline'],
        control: { type: 'select' },
      },
      options: {
        control: { type: 'object' },
      },
    }}
  >
    {(props) => ({
      template: `
    <div style="width: 213px;">
    <oui-form-field [appearance]="appearance">
        <oui-select (saveSelectionChange)="onChange($event)" ngClass="{{theme}}" [large]="large" [placeholder]="placeholder" multiple actionItems [cancelLabel]="cancelLabel" [doneLabel]="doneLabel" [disabled]="disabled">
          <oui-option *ngFor="let option of options" [value]="option">
            {{option}}
          </oui-option>
        </oui-select>
      </oui-form-field>
    </div>
    `,
      props: {
        ...props,
        onChange: action('change'),
      },
      moduleMetadata: {
        imports: [
          OuiFormFieldModule,
          OuiInputModule,
          OuiSelectModule,
          FormsModule,
          ReactiveFormsModule,
        ],
      },
    })}
  </Story>
</Canvas>

Multi select with singleActionItems:

<Canvas>
  <Story
    name="Single action multi select"
    height="300px"
    parameters={{
      docs: {
        source: {
          code: `<oui-form-field>
  <oui-select large placeholder="Favorite food" multiple singleActionItems>
    <oui-option *ngFor="let food of foods" [value]="food">
      {{food array}}
    </oui-option>
  </oui-select>
</oui-form-field>`,
        },
      },
    }}
    args={{
      large: false,
      theme: THEME[0],
      disabled: false,
      appearance: APPEARANCE[0],
      placeholder: 'Favorite food',
      options: [
        'Pizza',
        'Burgers',
        'Steak',
        'Tacos',
        'Pasta',
        'Fries',
        'Momos',
        'Kababs',
        'Rolls',
        'Biryani',
        'Sweets',
      ],
      singleActionLabel: 'apply',
      allowNoSelection: false,
    }}
    argTypes={{
      theme: {
        options: THEME,
        control: { type: 'select' },
      },
      appearance: {
        options: ['standard', 'underline'],
        control: { type: 'select' },
      },
      options: {
        control: { type: 'object' },
      },
    }}
  >
    {(props) => ({
      template: `
    <div style="width: 213px;">
    <oui-form-field [appearance]="appearance">
        <oui-select (saveSelectionChange)="onChange($event)" ngClass="{{theme}}" [large]="large" [placeholder]="placeholder" multiple singleActionItem [singleActionLabel]="singleActionLabel" [disabled]="disabled">
          <oui-option *ngFor="let option of options" [value]="option">
            {{option}}
          </oui-option>
        </oui-select>
      </oui-form-field>
    </div>
    `,
      props: {
        ...props,
        onChange: action('change'),
      },
      moduleMetadata: {
        imports: [
          OuiFormFieldModule,
          OuiInputModule,
          OuiSelectModule,
          FormsModule,
          ReactiveFormsModule,
        ],
      },
    })}
  </Story>
</Canvas>

Groups:

<Canvas>
  <Story
    name="Groups"
    height="350px"
    parameters={{
      docs: {
        source: {
          code: `<oui-form-field>
  <oui-select large placeholder="Favorite food" multiple>
    <oui-option>-- None --</oui-option>
    <oui-optgroup *ngFor="let group of foodGroups" [label]="group.name">
        <oui-option *ngFor="let food of foods" [value]="food">
        {{food array}}
        </oui-option>
    </oui-optgroup>
  </oui-select>
</oui-form-field>`,
        },
      },
    }}
    args={{
      large: false,
      theme: THEME[0],
      disabled: false,
      appearance: APPEARANCE[0],
      placeholder: 'Favorite food',
      groups: [
        {
          name: 'Fruit',
          options: ['Apple', 'Orange'],
        },
        {
          name: 'Vegetables',
          options: [
            'Lettuce',
            'Broccoli',
            'Corn',
            'Cucumber',
            'Lettuce',
            'Pumpkin',
            'Tomato',
          ],
        },
        {
          name: 'Meats',
          options: ['Steak', 'Chicken'],
        },
      ],
    }}
    argTypes={{
      theme: {
        options: THEME,
        control: { type: 'select' },
      },
      appearance: {
        options: ['standard', 'underline'],
        control: { type: 'select' },
      },
      groups: {
        control: { type: 'object' },
      },
    }}
  >
    {(props) => ({
      template: `
    <div style="width: 213px;">
    <oui-form-field [appearance]="appearance">
        <oui-select ngClass="{{theme}}" (selectionChange)="onChange($event)" [large]="large" [placeholder]="placeholder" [disabled]="disabled">
          <oui-option>-- None --</oui-option>
          <oui-optgroup *ngFor="let group of groups" [label]="group.name">
            <oui-option *ngFor="let option of group.options" [value]="option">
              {{option}}
            </oui-option>
          </oui-optgroup>
        </oui-select>
      </oui-form-field>
    </div>
    `,
      props: {
        ...props,
        onChange: action('change'),
      },
      moduleMetadata: {
        imports: [
          OuiFormFieldModule,
          OuiInputModule,
          OuiSelectModule,
          FormsModule,
          ReactiveFormsModule,
        ],
      },
    })}
  </Story>
</Canvas>

Search options:

<Canvas>
  <Story
    name="Search options"
    height="300px"
    parameters={{
      docs: {
        source: {
          code: `<oui-form-field>
  <oui-select large placeholder="Favorite food" multiple actionItems>
    <oui-select-search [(ngModel)]="keyword"></oui-select-search>
    <oui-option *ngFor="let food of (foods | filterOptions: keyword)" [value]="food">
      {{food array}}
    </oui-option>
  </oui-select>
</oui-form-field>`,
        },
      },
    }}
    args={{
      large: false,
      theme: THEME[0],
      disabled: false,
      appearance: APPEARANCE[0],
      placeholder: 'Favorite food',
      options: [
        'Pizza',
        'Burgers',
        'Steak',
        'Tacos',
        'Pasta',
        'Fries',
        'Momos',
        'Kababs',
        'Rolls',
        'Biryani',
        'Sweets',
      ],
    }}
    argTypes={{
      theme: {
        options: THEME,
        control: { type: 'select' },
      },
      appearance: {
        options: ['standard', 'underline'],
        control: { type: 'select' },
      },
      options: {
        control: { type: 'object' },
      },
    }}
  >
    {(props) => ({
      template: `
    <div style="width: 213px;">
      <oui-form-field [appearance]="appearance">
        <oui-select (selectionChange)="onChange($event)" ngClass="{{theme}}" [large]="large" [placeholder]="placeholder" [disabled]="disabled">
          <oui-select-search [(ngModel)]="keyword"></oui-select-search>
          <oui-option *ngFor="let option of (options | filterOptions: keyword)" [value]="option">
            {{option}}
          </oui-option>
          <div
            *ngIf="!(options | filterOptions: keyword).length"
            class="noResults"
          >
            No results match "{{ keyword }}"
          </div>
        </oui-select>
      </oui-form-field>
    </div>
    `,
      props: {
        ...props,
        onChange: action('change'),
      },
      moduleMetadata: {
        imports: [
          OuiFormFieldModule,
          OuiInputModule,
          OuiSelectModule,
          FormsModule,
          ReactiveFormsModule,
        ],
      },
    })}
  </Story>
</Canvas>

Stackblitz demo link : https://stackblitz.com/edit/oui-select-box

<ArgsTable of={OuiSelect} />
