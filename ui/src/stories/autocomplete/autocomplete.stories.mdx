import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs/blocks';
import { action } from '@storybook/addon-actions';
import { select, boolean, object } from '@storybook/addon-knobs';
import { STATEGROUPS, OPTIONS } from './const';
import { APPEARANCE } from '../const';
import {
  OuiAutocompleteModule,
  OuiFormFieldModule,
  OuiInputModule,
  OuiAutocomplete,
} from '../../components';
import { FormsModule, ReactiveFormsModule } from '@angular/forms';
import {
  OuiAutocompleteStorybook,
  OuiAutocompleteGroupStorybook,
} from './autocomplete.component';

<Meta title="MDX FORM FIELD/Autocomplete" />

# Autocomplete

The autocomplete is a normal text input enhanced by a panel of suggested options. See: https://github.com/scheduleonce/once-ui/blob/master/ui/src/components/autocomplete/README.md

Regular Input field

<Canvas>
  <Story
    name="Regular"
    parameters={{
      docs: {
        source: {
          code: `<oui-form-field>
            <input oui-input [ouiAutocomplete]="auto" />
          </oui-form-field>
          <oui-autocomplete #auto="ouiAutocomplete">
            <oui-option *ngFor="let option of options" [value]="option">
              {{ option }}
            </oui-option>
          </oui-autocomplete>`,
        },
      },
    }}
  >
    {{
      moduleMetadata: {
        imports: [
          OuiFormFieldModule,
          OuiInputModule,
          OuiAutocompleteModule,
          FormsModule,
          ReactiveFormsModule,
        ],
        schemas: [],
        declarations: [OuiAutocompleteStorybook],
      },
      component: OuiAutocompleteStorybook,
      props: {
        appearance: select('appearance', ['standard', 'underline'], 'standard'),
        options: object('options', OPTIONS),
        autoActiveFirstOption: boolean('autoActiveFirstOption', false),
        closed: action('closed'),
        disabled: boolean('disabled', false),
        opened: action('opened'),
        optionSelected: action('optionSelected'),
      },
    }}
  </Story>
</Canvas>

With Group

<Canvas>
  <Story
    name="With group"
    parameters={{
      docs: {
        source: {
          code: `<oui-form-field>
            <input oui-input [ouiAutocomplete]="auto" />
          </oui-form-field>
          <oui-autocomplete #auto="ouiAutocomplete">
            <oui-option *ngFor="let option of options" [value]="option">
              {{ option }}
            </oui-option>
          </oui-autocomplete>`,
        },
      },
    }}
  >
    {{
      moduleMetadata: {
        imports: [
          OuiFormFieldModule,
          OuiInputModule,
          OuiAutocompleteModule,
          FormsModule,
          ReactiveFormsModule,
        ],
        schemas: [],
        declarations: [OuiAutocompleteGroupStorybook],
      },
      component: OuiAutocompleteGroupStorybook,
      props: {
        appearance: select('appearance', APPEARANCE, APPEARANCE[0]),
        stateGroups: object('options', STATEGROUPS),
        autoActiveFirstOption: boolean('autoActiveFirstOption', false),
        closed: action('closed'),
        disabled: boolean('disabled', false),
        opened: action('opened'),
        optionSelected: action('optionSelected'),
      },
    }}
  </Story>
</Canvas>

Stackblitz demo link : https://stackblitz.com/edit/oui-autocomplete

<ArgsTable of={OuiAutocomplete} />
